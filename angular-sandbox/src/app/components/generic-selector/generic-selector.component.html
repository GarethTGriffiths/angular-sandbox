<div class="generic-selector">
  <mat-form-field class="form-field">
    <mat-label>Funds</mat-label>
    <mat-chip-list #chipList aria-label="Select a Fund">
      <mat-chip class="chip" *ngFor="let fund of selectedFunds" [ariaOrientation]="horizontal" [selectable]="selectable"
        [removable]="removable" (removed)="removeFund(fund)">
        {{fund.symbol}}
        <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
      </mat-chip>
      <input #fundInput [formControl]="fundControl" [matAutocomplete]="selectFundInputAutocomplete"
        [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
        (matChipInputTokenEnd)="addFund($event)" (click)="onSelectFundInputClick($event)">
      <button class="more-button" matTooltip="More" [matTooltipPosition]="'right'" mat-icon-button
        [style.visibility]="selectedFunds.length > 2 ? 'visible' : 'hidden'"
        (click)="toggleSelectedFundsListVisibility()" aria-label="More">
        <mat-icon>more_horiz</mat-icon>
      </button>
    </mat-chip-list>
    <mat-autocomplete #selectFundInputAutocomplete="matAutocomplete" (optionSelected)="addSelectedFund($event)">
      <mat-option *ngFor="let fund of filteredFunds | async" [value]="fund">
        {{fund.symbol}} ({{fund.name}})
      </mat-option>
    </mat-autocomplete>
    <div [style.visibility]="selectedFundsListVisible ? 'visible' : 'hidden'" class="selected-items-list-panel">
      <button class="close-button" matTooltip="Close" [matTooltipPosition]="'right'" mat-icon-button
        (click)="toggleSelectedFundsListVisibility()" aria-label="Close">
        <mat-icon>close</mat-icon>
      </button>
      <mat-selection-list class="selection-list" (selectionChange)="onSelectedFundsListSelectionChange($event)">
        <mat-list-option [selected]="true" [value]="fund" [checkboxPosition]="'before'"
          *ngFor="let fund of selectedFunds">
          {{fund.symbol}} ({{fund.name}})
        </mat-list-option>
      </mat-selection-list>
    </div>
  </mat-form-field>